<!DOCTYPE HTML>
<html>
    <head>
        <title>triti.co - schedule</title>
        <meta charset="utf-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1" />
        <!--[if lte IE 8]><script src="assets/js/ie/html5shiv.js"></script><![endif]-->
        <link rel="stylesheet" href="assets/css/main.css" />
        <!--[if lte IE 8]><link rel="stylesheet" href="assets/css/ie8.css" /><![endif]-->
        <script>
          (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
          (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
          m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
          })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

          ga('create', 'UA-71413809-1', 'auto');
          ga('require', 'linkid');
          ga('require', 'displayfeatures');
          ga('send', 'pageview');

        </script>       
        <script src="assets/js/jquery-1.11.3.min.js"></script>
    </head>
	<body>
		<div id="page-wrapper">

            <!-- Header -->        
            <header id="header">
                <h1><a href="cities/new_orleans.html">Current Location:</a> New Orleans</h1>
                <nav id="nav">
                    <ul>
                        <li><a href="http://triti.co">Home</a></li>
                        <li><a href="schedule.html">Schedule</a></li>
                        <li><a href="#" class="button">Contact</a></li>
                    </ul>
                </nav>
            </header>

			<!-- Main -->
				<section id="main" class="container 75%">
					<header>
						<h2>Contact Me</h2>
						<p>Don't have my contact info? Feel free to reach out here.</p>
					</header>
					<div class="box">					
				        <div id="feedback" style="width: 100%; display: block; float: right; display:none;">
				            <div class="requestSubmited" style="text-align: center; background-color: #DFF2BF;">Your message has been sent!</div>
				        </div>							
						<form id="contact" target="_self" onsubmit="">
							<div class="row uniform 50%">
								<div class="6u 12u(mobilep)">
									<input type="text" name="name" id="name" value="" placeholder="Name" required/>
								</div>
								<div class="6u 12u(mobilep)">
									<input type="email" name="email" id="email" value="" placeholder="Email" required/>
								</div>
							</div>
							<div class="row uniform 50%">
								<div class="12u">
									<input type="text" name="subject" id="subject" value="" placeholder="Subject" required/>
								</div>
							</div>
							<div class="row uniform 50%">
								<div class="12u">
									<textarea name="message" id="message" placeholder="Enter your message" rows="6"></textarea>
								</div>
							</div>
							<div class="row uniform">
								<div class="12u">
									<ul class="actions align-center">
										<li><input type="submit" value="Send Message" /></li>
									</ul>
								</div>
							</div>
						</form>										
					</div>
				</section>

<script type="text/javascript">
	// Variable to hold request
	var request;

	// Bind to the submit event of our form
	$("#contact").submit(function(event){

	    // Abort any pending request
	    if (request) {
	        request.abort();
	    }
	    // setup some local variables
	    var $form = $(this);

	    // Let's select and cache all the fields
	    var $inputs = $form.find("input, select, button, textarea");

	    // Serialize the data in the form
	    var serializedData = $form.serialize();

	    // Let's disable the inputs for the duration of the Ajax request.
	    // Note: we disable elements AFTER the form data has been serialized.
	    // Disabled form elements will not be serialized.
	    $inputs.prop("disabled", true);

	    // Fire off the request to google macro
        var name = $('#name').val();
        var email = $('#email').val();
        var subject = $('#subject').val();
        var message = $('#message').val();
	    if ((name !== "") && (subject !== "") && (validateEmail(email))) {
			request = $.ajax({
	            url: "https://script.google.com/macros/s/AKfycbx65k4h9mvwI3ReROaTmCDXEu2p9qbqbFjwdCP8wqtjArCKiX7Y/exec",
	            type: "post",
	            data: serializedData
	        });	    

		    // Callback handler that will be called on success
		    request.done(function (response, textStatus, jqXHR){
		        $("#contact")[0].reset();
		        $("#feedback").show();
		    });

		    // Callback handler that will be called on failure
		    request.fail(function (jqXHR, textStatus, errorThrown){
		        // Log the error to the console
		        console.error(
		            "The following error occurred: "+
		            textStatus, errorThrown
		        );
		    });

		    // Callback handler that will be called regardless
		    // if the request failed or succeeded
		    request.always(function () {
		        // Reenable the inputs
		        $inputs.prop("disabled", false);
		    });
        } else {
            alert("error")
        }
	    // Prevent default posting of form
	    event.preventDefault();
	});

    function validateEmail(email) {
        var re = /^(([^<>()[\]\\.,;:\s@\"]+(\.[^<>()[\]\\.,;:\s@\"]+)*)|(\".+\"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/;
        return re.test(email);
    }
    
</script>


            <!-- Footer -->
            <footer id="footer">
                <ul class="icons">
                    <li><a href="https://twitter.com/tritico" class="icon fa-twitter"><span class="label">Twitter</span></a></li>
                    <li><a href="https://www.facebook.com/matthewtritico" class="icon fa-facebook"><span class="label">Facebook</span></a></li>
                    <li><a href="https://www.instagram.com/tritico/" class="icon fa-instagram"><span class="label">Instagram</span></a></li>
                    <li><a href="https://github.com/tritico" class="icon fa-github"><span class="label">Github</span></a></li>
                    <li><a href="https://www.linkedin.com/in/matthewtritico" class="icon  fa-linkedin"><span class="label">LinkedIn</span></a></li>
                </ul>
                <ul class="copyright">
                    <li>&copy; Untitled. All rights reserved.</li>
                    <li><a href="http://triti.co">triti.co</a></li>
                </ul>
            </footer>

		</div>

        <!-- Scripts -->
            <script src="assets/js/jquery-1.11.3.min.js"></script>
            <script src="assets/js/jquery.dropotron.min.js"></script>
            <script src="assets/js/jquery.scrollgress.min.js"></script>
            <script src="assets/js/skel.min.js"></script>
            <script src="assets/js/util.js"></script>
            <!--[if lte IE 8]><script src="assets/js/ie/respond.min.js"></script><![endif]-->
            <script src="assets/js/main.js"></script>

	</body>
</html>